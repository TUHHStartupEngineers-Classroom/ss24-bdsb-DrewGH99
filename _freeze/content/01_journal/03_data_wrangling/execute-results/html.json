{
  "hash": "a7e94897fdad8a52af7853935502c040",
  "result": {
    "markdown": "---\ntitle: \"Data Wrangling\"\nauthor: \"Drew Gilmore\"\n---\n\n\n# Challenge 1 \nAlternative 2 [reduced data]\n\n::: {.cell hash='03_data_wrangling_cache/html/plot_5022c255f759252de70dd79a2440fe33'}\n\n```{.r .cell-code}\n# Challenge 1 ----\n\nlibrary(data.table)\nlibrary(here)\nlibrary(vroom)\nlibrary(tidyverse)\nlibrary(knitr)\n\ncol_types <- list(\n  id = col_character(),\n  type = col_character(),\n  number = col_character(),\n  country = col_character(),\n  date = col_date(\"%Y-%m-%d\"),\n  abstract = col_character(),\n  title = col_character(),\n  kind = col_character(),\n  num_claims = col_double(),\n  filename = col_character(),\n  withdrawn = col_double(),\n  patent_id = col_character(),\n  assignee_id = col_character()\n  \n)\n\npatent_data <- vroom(\n  file       = here(\"03_data_wrangling/Patent_data_reduced/patent.tsv\"), \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\nassignee_data <- vroom(\n  file       = here(\"03_data_wrangling/Patent_data_reduced/assignee.tsv\"), \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\npatent_assignee_data <- vroom(\n  file       = here(\"03_data_wrangling/Patent_data_reduced/patent_assignee.tsv\"), \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\nuspc_data <- vroom(\n  file       = here(\"03_data_wrangling/Patent_data_reduced/uspc.tsv\"), \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\npatent_tbl <- setDT(patent_data)\nassignee_tbl <- setDT(assignee_data)\npatent_assignee_tbl <- setDT(patent_assignee_data)\nuspc_tbl <- setDT(uspc_data)\n\n#change column names to distinguish data\n\nsetnames(patent_tbl, \"id\", \"patent_id\")\nsetnames(assignee_tbl, \"id\", \"assignee_id\")\n\n#merge data\npatents_orgs_tbl <- merge(patent_assignee_tbl, assignee_tbl, by='assignee_id', all = T)\n\n#sort based on assignee type\n#retrieve the number of rows that each organization appears in the table\nnum_patents <- patents_orgs_tbl[type == \"2\", .N, by = organization]\n\n#sort descending number of patents\nnum_patents <- num_patents[order(-rank(N))]\n\nsetnames(num_patents, \"N\", \"number of patents\")\n\nkable(head(num_patents, n = 10), caption = \"Top 10 US Companies With The Most New Granted Patents For 2014\")\n```\n\n::: {.cell-output-display}\nTable: Top 10 US Companies With The Most New Granted Patents For 2014\n\n|organization                                | number of patents|\n|:-------------------------------------------|-----------------:|\n|International Business Machines Corporation |              7547|\n|Microsoft Corporation                       |              3165|\n|Google Inc.                                 |              2668|\n|QUALCOMM Incorporated                       |              2597|\n|Apple Inc.                                  |              2201|\n|General Electric Company                    |              1873|\n|Hewlett-Packard Development Company, L.P.   |              1638|\n|AT&T INTELLECTUAL PROPERTY I, L.P.          |              1625|\n|Intel Corporation                           |              1616|\n|GM Global Technology Operations LLC         |              1533|\n:::\n:::\n\n\n# Challenge 2\nAlternative 2 [reduced data]\n\n::: {.cell hash='03_data_wrangling_cache/html/plot2_a102d917f4c431beb26377bbc4ffc674'}\n\n```{.r .cell-code}\n# Challenge 2 ----\n\n#merge data\npatents_orgs_tbl_2 <- merge(patents_orgs_tbl, patent_tbl, by='patent_id', all = T)\n\n#filter based on US companies\nnum_patents_aug <- patents_orgs_tbl_2[type == \"2\" & lubridate::month(date) == \"8\", .N, by = organization]\n\n#sort\nnum_patents_aug <- num_patents_aug[order(-rank(N))]\n\n\nsetnames(num_patents_aug, \"N\", \"number of patents (Aug, 2014)\")\n\nkable(head(num_patents_aug, n = 10), caption = \"Top 10 US Companies With The Most New Granted Patents For August 2014\")\n```\n\n::: {.cell-output-display}\nTable: Top 10 US Companies With The Most New Granted Patents For August 2014\n\n|organization                                | number of patents (Aug, 2014)|\n|:-------------------------------------------|-----------------------------:|\n|International Business Machines Corporation |                           718|\n|Microsoft Corporation                       |                           337|\n|Google Inc.                                 |                           240|\n|QUALCOMM Incorporated                       |                           223|\n|Apple Inc.                                  |                           222|\n|Intel Corporation                           |                           159|\n|General Electric Company                    |                           148|\n|AT&T INTELLECTUAL PROPERTY I, L.P.          |                           146|\n|Hewlett-Packard Development Company, L.P.   |                           140|\n|GM Global Technology Operations LLC         |                           138|\n:::\n:::\n\n\n# Challenge 3 \nAlternative 2 [reduced data]\n\n::: {.cell hash='03_data_wrangling_cache/html/plot3_567b0f96ce370a4b5e74171209728236'}\n\n```{.r .cell-code}\n# Challenge 3 ----\n\n\n#join data\npatents_orgs_tbl_3 <- merge(patents_orgs_tbl_2, uspc_tbl, by='patent_id', all = T)\n\n#sort by worldwide companies and number of patents\npatents_orgs_tbl_4 <- patents_orgs_tbl_3[type == \"2\" | type == \"3\", .N, by=organization]\n\n#sort descending\npatents_orgs_tbl_5 <- patents_orgs_tbl_4[order(-rank(N))]\n\n#top 10\npatents_orgs_tbl_6 <- head(patents_orgs_tbl_5, n = 10)\n\n#create variable of names to filter by\ntop_ten <- patents_orgs_tbl_6[,organization]\n\n#filter by names and exclude NA\npatents_orgs_tbl_7 <- patents_orgs_tbl_3[organization %in% c(top_ten) & !is.na(mainclass_id), .N, by = mainclass_id]\n\n#sort\npatents_orgs_tbl_8 <- patents_orgs_tbl_7[order(-rank(N))]\n\nsetnames(patents_orgs_tbl_8, \"N\", \"number of patents (2014)\")\n\nkable(head(patents_orgs_tbl_8, n = 5), caption = \"Top 5 USPTO Tech Main Classes (excluding NA) of the Top 10 Worldwide Companies With the Most New Granted Patents for August 2014\")\n```\n\n::: {.cell-output-display}\nTable: Top 5 USPTO Tech Main Classes (excluding NA) of the Top 10 Worldwide Companies With the Most New Granted Patents for August 2014\n\n| mainclass_id| number of patents (2014)|\n|------------:|------------------------:|\n|          257|                     7979|\n|          455|                     6191|\n|          370|                     5483|\n|          348|                     4113|\n|          709|                     4018|\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}